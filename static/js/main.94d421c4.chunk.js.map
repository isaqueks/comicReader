{"version":3,"sources":["reportWebVitals.ts","comicReader/components/comicPage.tsx","comicReader/components/comicDisplay.tsx","comicReader/components/menuBar.tsx","comicReader/components/pagePreview.tsx","comicReader/components/pagePreviewSection.tsx","index.tsx","comicReader/components/comicReader.tsx"],"names":["reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ComicPage","props","style","backgroundImage","src","className","ComicDisplay","state","pages","showingIndex","currentIndex","artificialScroll","domElement","isTouching","scrollWhenTouchStart","this","length","onSetPage","overflowX","setTimeout","e","scrollLeft","diff","Math","abs","nextPage","prevPage","scrollToCorrectIndex","stopScroll","scrollW","scrollWidth","pageW","firstElementChild","clientWidth","touchEndHandler","clientX","clientY","bounds","target","getBoundingClientRect","elementX","left","top","width","forceSmooth","setScrollLeft","setState","document","querySelector","lastWidth","setInterval","index","step","instant","callback","desired","onscroll","scroll","behavior","undefined","onClick","clickHandler","onScroll","scrollHandler","onTouchStart","touchStartHandler","onTouchEnd","getThreePages","React","Component","MenuBar","returnArrowClasses","onReturnClicked","push","join","currentPage","maxPages","toFixed","PagePreview","selectedIndex","url","scrollTop","indexDistance","myScrollTop","useRealImage","window","innerHeight","classes","buildPreviewList","urls","click","previewList","i","PagePreviewSection","realElement","currentScrollTop","panelVisible","height","clientHeight","event","getScrollTop","getElementHeight","selectedElement","scrollIntoView","scrollToSelected","intervalListener","bind","previewIndex","visible","innerWidth","urlArray","panelClasses","togglePanel","previewClicked","ComicReader","previewPages","currentPageIndex","startIndex","onClose","onReadPage","keyHandlers","setPageIndex","handler","code","Error","tabIndex","onKeyDown","handleKeyDown","previews","toString","padStart","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.94d421c4.chunk.js","sourcesContent":["import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import '../styles/comicPage.css';\r\n\r\nexport default function ComicPage(props) {\r\n\r\n    const style = {\r\n        backgroundImage: `url(\"${props.src}\")`\r\n    }\r\n\r\n    return <div className=\"comicPage\" style={style}></div>\r\n}","import React from 'react';\r\nimport '../styles/comicDisplay.css';\r\nimport ComicPage from './comicPage';\r\n\r\ninterface ClickHandler {\r\n    (e: Event);\r\n}\r\n\r\ninterface ComicProps {\r\n\r\n    currentIndex: number;\r\n    pages: string[];\r\n    onSetPage: (i: number) => any;\r\n\r\n}\r\n\r\nexport default class ComicDisplay extends React.Component<ComicProps> {\r\n\r\n \r\n    state = {\r\n        pages: this.props.pages,\r\n        showingIndex: this.props.currentIndex\r\n    }\r\n    \r\n    artificialScroll: boolean = false;\r\n    domElement: HTMLElement;\r\n\r\n    isTouching: boolean = false;\r\n    scrollWhenTouchStart: number;\r\n\r\n    private nextPage() {\r\n        if (this.props.currentIndex < this.state.pages.length - 1) {\r\n            this.props.onSetPage(this.props.currentIndex+1);\r\n        }\r\n    }\r\n\r\n    private prevPage() {\r\n        if (this.props.currentIndex > 0) {\r\n            this.props.onSetPage(this.props.currentIndex-1);\r\n        }\r\n    }\r\n\r\n    private stopScroll() {\r\n        if (!this.domElement) return;\r\n        this.domElement.style.overflowX = 'hidden';\r\n        setTimeout(() => {\r\n            this.domElement.style.overflowX = 'scroll';\r\n        }, 50);\r\n    }\r\n\r\n    private touchStartHandler(e) {\r\n        this.isTouching = true;\r\n        this.scrollWhenTouchStart = this.domElement.scrollLeft;\r\n    }\r\n\r\n    private touchEndHandler(e) {\r\n        this.isTouching = false;\r\n        const diff = this.domElement.scrollLeft - this.scrollWhenTouchStart;\r\n        if (diff !== 0) {\r\n            if (Math.abs(diff) > 20) {\r\n                if (diff > 0) {\r\n                    this.nextPage();\r\n                }\r\n                else {\r\n                    this.prevPage();\r\n                }\r\n            }\r\n            else {\r\n                this.scrollToCorrectIndex(true);\r\n            }\r\n            this.stopScroll();\r\n        }\r\n    }\r\n\r\n    private scrollHandler(e) {\r\n        if (this.artificialScroll || !this.domElement) {\r\n            return;\r\n        }\r\n\r\n        const scrollLeft = this.domElement.scrollLeft;\r\n        const scrollW = this.domElement.scrollWidth;\r\n        const pageW = this.domElement.firstElementChild.clientWidth;\r\n\r\n        // 50 tolerance\r\n        if (this.isTouching) {\r\n            if ((scrollLeft >= scrollW - pageW - 50) || scrollLeft <= 50) {\r\n                this.touchEndHandler(e);\r\n            }\r\n            if ((this.state.showingIndex === 0 && scrollLeft < (pageW - 100)) ||\r\n                (this.state.showingIndex === this.state.pages.length - 1 && scrollLeft > pageW + 100)) {\r\n                this.touchEndHandler(e);\r\n                this.scrollToCorrectIndex(true);\r\n            }\r\n        }\r\n        \r\n    }\r\n\r\n    private clickHandler(e: any) {\r\n        const { clientX, clientY, target } = e;\r\n\r\n        const bounds = target.getBoundingClientRect();\r\n\r\n        const elementX = bounds.left;\r\n        const elementY = bounds.top;\r\n\r\n        const x = clientX - elementX;\r\n        const y = clientY - elementY;\r\n\r\n        if (x >= bounds.width * 0.5) {\r\n            this.nextPage();\r\n        }\r\n        else {\r\n            this.prevPage();\r\n        }\r\n\r\n    }  \r\n\r\n    private scrollToCorrectIndex(forceSmooth = false) {\r\n        const { currentIndex } = this.props;\r\n        const { showingIndex } = this.state;\r\n        if (showingIndex == currentIndex && currentIndex === 0) {\r\n            return this.setScrollLeft(1, !forceSmooth);\r\n        }\r\n\r\n        const diff = currentIndex - showingIndex;\r\n        if (Math.abs(diff) === 1) {\r\n            this.setScrollLeft(1 + diff, false, () => {\r\n                this.setState({\r\n                    showingIndex: currentIndex\r\n                }, () => {\r\n                    this.setScrollLeft(1, !forceSmooth);\r\n                })\r\n            });\r\n        }\r\n        else if (Math.abs(diff) >= 2) {\r\n            this.setState({\r\n                showingIndex: currentIndex\r\n            }, () => {\r\n                this.setScrollLeft(1, !forceSmooth);\r\n            })\r\n        }\r\n        else if (diff === 0) {\r\n            this.setScrollLeft(1, !forceSmooth);\r\n        }\r\n    \r\n    }\r\n\r\n    componentDidMount() {\r\n        if (!this.domElement) {\r\n            this.domElement = document.querySelector('.comicDisplay');\r\n        }\r\n        this.scrollToCorrectIndex();\r\n\r\n        let lastWidth = this.domElement?.clientWidth;\r\n        setInterval(() => {\r\n            if (this.domElement && lastWidth && Math.abs(lastWidth - this.domElement.clientWidth) > 0) {\r\n                this.scrollToCorrectIndex();  \r\n            }\r\n            lastWidth = this.domElement.clientWidth;\r\n        }, 100);\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.scrollToCorrectIndex();\r\n    }\r\n\r\n\r\n    private getThreePages(index: number, pages: string[]): JSX.Element[] {\r\n        return [\r\n            <ComicPage src={pages[index-1]} key={index-1} />,\r\n            <ComicPage src={pages[index]} key={index} />,\r\n            <ComicPage src={pages[index+1]} key={index+1} />\r\n        ]\r\n    }\r\n\r\n    private setScrollLeft(step: number, instant: boolean = false, callback?: (i?: number) => any) {\r\n        if (!this.domElement) return;\r\n\r\n        const desired = step * this.domElement.firstElementChild.clientWidth;\r\n\r\n        this.domElement.onscroll = (e) => {\r\n            \r\n            // 10px tolerance to bypass firefox bug\r\n            if (Math.abs(this.domElement.scrollLeft - desired) <= 10) {\r\n                this.artificialScroll = false;\r\n                callback && callback(desired);\r\n            }\r\n        }\r\n        \r\n        this.artificialScroll = true;\r\n        this.domElement.scroll({\r\n            left: step * this.domElement.firstElementChild.clientWidth,\r\n            behavior: instant ? undefined : 'smooth'\r\n        });\r\n    }\r\n\r\n    render() {\r\n\r\n        const { pages, currentIndex } = this.props;\r\n\r\n        return <div \r\n            className=\"comicDisplay\" \r\n            onClick={e => this.clickHandler(e)} \r\n            onScroll={e => this.scrollHandler(e)}\r\n            onTouchStart={e => this.touchStartHandler(e)}\r\n            onTouchEnd={e => this.touchEndHandler(e)}\r\n            >\r\n            {this.getThreePages(this.state.showingIndex, pages)}\r\n        </div>;\r\n\r\n    }\r\n\r\n}","import React from 'react';\r\nimport '../styles/menuBar.css';\r\n\r\nexport default function MenuBar(props) {\r\n\r\n    const returnArrowClasses = ['returnArrow'];\r\n    if (!props.onReturnClicked) {\r\n        returnArrowClasses.push('invisible');\r\n    }\r\n\r\n    return (<div className=\"menuBar\">\r\n        <div className={returnArrowClasses.join(' ')} onClick={e => props.onReturnClicked&&props.onReturnClicked(e)}></div>\r\n        <div className=\"menuContent\">\r\n            {props.currentPage+1}/{props.maxPages} \r\n            &nbsp;-&nbsp;{((props.currentPage+1)/props.maxPages*100).toFixed(0)}%\r\n        </div>\r\n    </div>);\r\n}","import React from \"react\";\r\nimport '../styles/pagePreview.css';\r\n\r\nexport default function PagePreview(\r\n    selectedIndex: number, \r\n    index: number, \r\n    url: string, \r\n    scrollTop: number, \r\n    onClick: Function\r\n): JSX.Element {\r\n\r\n    const indexDistance = Math.abs(selectedIndex - index);\r\n    \r\n    const myScrollTop = index * 270;\r\n    const scrollDist = Math.abs(scrollTop - myScrollTop);\r\n\r\n    const useRealImage = scrollDist < window.innerHeight * 2 || indexDistance < 3;\r\n    \r\n\r\n    const classes = ['pagePreview'];\r\n    if (selectedIndex === index) {\r\n        classes.push('selected');\r\n    }\r\n    if (!useRealImage) {\r\n        classes.push('placeholder');\r\n    }\r\n\r\n    return (\r\n        <img \r\n            width=\"100%\" \r\n            key={index} \r\n            data-index={index} \r\n            src={useRealImage ? (url) : undefined} \r\n            className={classes.join(' ')} \r\n            onClick={e => onClick && onClick(index)} \r\n        />\r\n    );\r\n}","import React from 'react';\r\nimport '../styles/pagePreviewSection.css';\r\nimport PagePreview from './pagePreview';\r\n\r\nfunction buildPreviewList(\r\n    selectedIndex: number, \r\n    urls: string[], \r\n    scrollTop: number, \r\n    click): \r\nJSX.Element[] {\r\n        \r\n    const previewList: JSX.Element[] = [];\r\n    let i = 0;\r\n    \r\n    for (let url of urls) {\r\n        previewList.push(\r\n            PagePreview(\r\n                selectedIndex, \r\n                i++, \r\n                url, \r\n                scrollTop, \r\n                click\r\n            )\r\n        );\r\n    }\r\n    \r\n    return previewList;\r\n}\r\n\r\ninterface PreviewSectionProps {\r\n    urlArray: string[];\r\n    selectedIndex: number;\r\n    onSetPage: Function;\r\n}\r\n\r\n\r\nexport default class PagePreviewSection extends React.Component<PreviewSectionProps> {\r\n\r\n    private realElement: HTMLDivElement;\r\n    private selectedIndex = -1;\r\n\r\n    state = {\r\n        currentScrollTop: 0,\r\n        panelVisible: true,\r\n        height: 0\r\n    }\r\n\r\n    private getScrollTop() {\r\n        return this.realElement?.scrollTop || 0;\r\n    }\r\n\r\n    private getElementHeight() {\r\n        return this.realElement?.clientHeight || 0;\r\n    }\r\n\r\n    private scrollHandler(event) {\r\n        const scrollTop = this.getScrollTop();\r\n        const diff = Math.abs(scrollTop - this.state.currentScrollTop);\r\n        if (diff > window.innerHeight) {\r\n            this.setState({\r\n                currentScrollTop: scrollTop,\r\n                height: this.getElementHeight()\r\n            })\r\n        }\r\n    }\r\n\r\n    private scrollToSelected() {\r\n        \r\n        if (this.realElement) {\r\n\r\n            const selectedElement = this.realElement.querySelector(`[data-index=\"${this.props.selectedIndex}\"]`)\r\n            \r\n            selectedElement?.scrollIntoView({\r\n                behavior: 'smooth'\r\n            })\r\n        }\r\n    }\r\n\r\n    private intervalListener() {\r\n        if (this.selectedIndex != this.props.selectedIndex) {\r\n            this.scrollToSelected();            \r\n            this.selectedIndex = this.props.selectedIndex;\r\n        }\r\n\r\n        if (this.getElementHeight() != this.state.height) {\r\n            this.setState({\r\n                height: this.getElementHeight()\r\n            });\r\n            this.scrollToSelected();\r\n        }\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        window.setInterval(this.intervalListener.bind(this), 75);\r\n        this.realElement = document.querySelector<HTMLDivElement>('.pagePreviewSection');\r\n        const scrollTop = this.getScrollTop();\r\n        if (scrollTop != this.state.currentScrollTop) {\r\n            this.setState({\r\n                currentScrollTop: scrollTop\r\n            })\r\n        }\r\n    }\r\n\r\n    previewClicked(previewIndex: number) {\r\n        if (this.props.onSetPage) {\r\n            this.props.onSetPage(previewIndex);\r\n        }\r\n    }\r\n\r\n    togglePanel(event) {\r\n        const visible = this.state.panelVisible;\r\n        this.setState({\r\n            panelVisible: !visible\r\n        })\r\n    }\r\n\r\n    render() {\r\n\r\n        const { props } = this;\r\n\r\n        if (window.innerWidth < 600 || !props.urlArray) {\r\n            return (\r\n                <div className=\"pagePreviewContainer hidden\">\r\n                    <div className=\"pagePreviewSection\" />\r\n                </div>\r\n            );\r\n        }\r\n\r\n        const panelClasses = ['pagePreviewContainer'];\r\n        if (!this.state.panelVisible) {\r\n            panelClasses.push('panelHidden');\r\n        }\r\n        \r\n        return (\r\n        <div className={panelClasses.join(' ')}>\r\n            <div className=\"pagePreviewHideArrow\" onClick={e => this.togglePanel(e)}>\r\n                <div className=\"pagePreviewHideArrowIcon\" />\r\n            </div>\r\n            <div className=\"pagePreviewSection\" onScroll={e => this.scrollHandler(e)}>\r\n                { buildPreviewList(props.selectedIndex, props.urlArray, this.state.currentScrollTop, this.previewClicked.bind(this)) }\r\n            </div>\r\n        </div>\r\n        );\r\n    }\r\n\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport reportWebVitals from './reportWebVitals';\nimport ComicReader from './comicReader/components/comicReader';\n\nconst pages: Array<string> = []\nconst previews: Array<string> = []\n\nfor (let i = 1; i <= 25; i++) {\n    pages.push(`/fa4f8149-409f-4b92-805b-d99fe92f4f6d/Death Note Vol. 01 (2005) (Digital TPB) (DarkZone-Empire) ${i.toString().padStart(3, '0')}.jpg.480w`);\n    previews.push(`/fa4f8149-409f-4b92-805b-d99fe92f4f6d/Death Note Vol. 01 (2005) (Digital TPB) (DarkZone-Empire) ${i.toString().padStart(3, '0')}.jpg.thumb`);\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    <ComicReader pages={pages} />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import React from 'react';\r\nimport ComicDisplay from './comicDisplay';\r\nimport '../styles/comicReader.css';\r\nimport MenuBar from './menuBar';\r\nimport PagePreviewSection from './pagePreviewSection';\r\n\r\ninterface ComicReaderProps {\r\n    pages: string[],\r\n    previewPages?: string[],\r\n    startIndex?: number;\r\n    onClose?: Function;\r\n    onReadPage?: Function;\r\n}\r\n\r\nexport default class ComicReader extends React.Component<ComicReaderProps> {\r\n\r\n    state: Readonly<{\r\n        pages: string[],\r\n        previewPages?: string[]\r\n        currentPageIndex: number,\r\n        onClose: Function,\r\n        onReadPage: Function\r\n    }> = {\r\n        pages: this.props.pages,\r\n        previewPages: this.props.previewPages,\r\n        currentPageIndex: this.props.startIndex || 0,\r\n        onClose: this.props.onClose,\r\n        onReadPage: this.props.onReadPage\r\n    }\r\n\r\n    public setPageIndex(index: number) {\r\n\r\n        this.state.onReadPage && this.state.onReadPage(index);\r\n        \r\n        this.setState({\r\n            currentPageIndex: index\r\n        })\r\n    }\r\n\r\n    public nextPage() {\r\n        if (this.state.currentPageIndex < this.state.pages.length - 1) {\r\n            this.setPageIndex(this.state.currentPageIndex+1);\r\n        }\r\n    }\r\n\r\n    public prevPage() {\r\n        if (this.state.currentPageIndex > 0) {\r\n            this.setPageIndex(this.state.currentPageIndex - 1);\r\n        }\r\n    }\r\n\r\n    private keyHandlers = {\r\n        'ArrowLeft': this.prevPage,\r\n        'ArrowUp': this.prevPage,\r\n        'ArrowRight': this.nextPage,\r\n        'ArrowDown': this.nextPage\r\n    }\r\n\r\n    private handleKeyDown(e) {\r\n        const handler = this.keyHandlers[e.code];\r\n        handler && handler.bind(this)();\r\n    }\r\n\r\n    render() {\r\n\r\n        const { pages, currentPageIndex } = this.state;\r\n        const previewPages = this.state.previewPages || pages;\r\n        \r\n        if (previewPages.length != pages.length) {\r\n            throw new Error('pages and previewPages must have the same length!');\r\n        }\r\n\r\n        return (<div tabIndex={0} className=\"comicReader\" onKeyDown={e => this.handleKeyDown(e)}>\r\n            <MenuBar onReturnClicked={this.state.onClose} currentPage={currentPageIndex} maxPages={pages.length} />\r\n            <div className=\"mainContent\">\r\n                <PagePreviewSection selectedIndex={currentPageIndex} urlArray={previewPages} onSetPage={index => this.setPageIndex(index)}/>\r\n                <div className=\"contentCenter\">\r\n                    <ComicDisplay pages={pages} currentIndex={currentPageIndex} onSetPage={i => this.setPageIndex(i)} />\r\n                </div>\r\n            </div>\r\n        </div>);\r\n    }\r\n\r\n}"],"sourceRoot":""}