(this["webpackJsonpcomic-reader"]=this["webpackJsonpcomic-reader"]||[]).push([[0],{397:function(e,t,n){},398:function(e,t,n){},399:function(e,t,n){},401:function(e,t,n){},402:function(e,t,n){},403:function(e,t,n){},404:function(e,t,n){},405:function(e,t,n){"use strict";n.r(t);n(196),n(208);var r=n(27),i=n.n(r),o=n(194),s=n.n(o),l=(n(397),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,406)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),r(e),i(e),o(e),s(e)}))}),a=n(55),c=n(56),d=n(58),h=n(57),u=(n(398),n(399),n(5));function g(e){var t={backgroundImage:'url("'.concat(e.src,'")')};return Object(u.jsx)("div",{className:"comicPage",style:e.src&&t})}var p=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={pages:e.props.pages,showingIndex:e.props.currentIndex},e.artificialScroll=!1,e.domElement=void 0,e.shouldIgnoreScrollStop=!1,e.scrollLeftBeforeScrollStarted=void 0,e}return Object(c.a)(n,[{key:"nextPage",value:function(){this.props.currentIndex<this.state.pages.length-1&&(this.shouldIgnoreScrollStop=!0,this.props.onSetPage(this.props.currentIndex+1))}},{key:"prevPage",value:function(){this.props.currentIndex>0&&(this.shouldIgnoreScrollStop=!0,this.props.onSetPage(this.props.currentIndex-1))}},{key:"onScrollStop",value:function(){var e=[this.domElement.scrollLeft,this.scrollLeftBeforeScrollStarted],t=e[0]-e[1];this.shouldIgnoreScrollStop||0===t||(Math.abs(t)>20?t>0?this.nextPage():this.prevPage():this.scrollToCorrectIndex(!0)),this.shouldIgnoreScrollStop=!1}},{key:"clickHandler",value:function(e){var t=e.clientX,n=e.clientY,r=e.target.getBoundingClientRect(),i=r.left;r.top;t-i>=.5*r.width?this.nextPage():this.prevPage()}},{key:"scrollToCorrectIndex",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.props.currentIndex,r=this.state.showingIndex;if(r==n&&0===n)return this.setScrollLeft(1,!t);var i=n-r;1===Math.abs(i)?this.setScrollLeft(1+i,!1,(function(){e.setState({showingIndex:n},(function(){e.setScrollLeft(1,!t)}))})):Math.abs(i)>=2?this.setState({showingIndex:n},(function(){e.setScrollLeft(1,!t)})):0===i&&this.setScrollLeft(1,!t)}},{key:"componentDidMount",value:function(){var e,t,n=this;this.domElement||(this.domElement=document.querySelector(".comicDisplay")),this.scrollToCorrectIndex();var r=null===(e=this.domElement)||void 0===e?void 0:e.clientWidth,i=0,o=!1;this.scrollLeftBeforeScrollStarted=null===(t=this.domElement)||void 0===t?void 0:t.scrollLeft,setInterval((function(){if(n.domElement)if(r&&Math.abs(r-n.domElement.clientWidth)>0&&n.scrollToCorrectIndex(),r=n.domElement.clientWidth,n.domElement.scrollLeft!=i)o=!1,i=n.domElement.scrollLeft;else if(!o){var e;o=!0,n.onScrollStop(),n.scrollLeftBeforeScrollStarted=null===(e=n.domElement)||void 0===e?void 0:e.scrollLeft}}),70)}},{key:"componentDidUpdate",value:function(){this.scrollToCorrectIndex()}},{key:"getThreePages",value:function(e,t){return[Object(u.jsx)(g,{src:t[e-1]},e-1),Object(u.jsx)(g,{src:t[e]},e),Object(u.jsx)(g,{src:t[e+1]},e+1)]}},{key:"setScrollLeft",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0;if(this.domElement){var i=e*this.domElement.firstElementChild.clientWidth;if(i===this.domElement.scrollLeft)return r&&r(i);this.domElement.onscroll=function(e){Math.abs(t.domElement.scrollLeft-i)<=10&&(t.artificialScroll=!1,r&&r(i))},this.artificialScroll=!0,this.domElement.scroll({left:e*this.domElement.firstElementChild.clientWidth,behavior:n?void 0:"smooth"})}}},{key:"render",value:function(){var e=this,t=this.props.pages;return Object(u.jsx)("div",{className:"comicDisplay",onClick:function(t){return e.clickHandler(t)},children:this.getThreePages(this.state.showingIndex,t)})}}]),n}(i.a.Component);n(401),n(402);function v(e){var t=["returnArrow"];return e.onReturnClicked||t.push("invisible"),Object(u.jsxs)("div",{className:"menuBar",children:[Object(u.jsx)("div",{className:t.join(" "),onClick:function(t){return e.onReturnClicked&&e.onReturnClicked(t)}}),Object(u.jsxs)("div",{className:"menuContent",children:[e.currentPage+1,"/",e.maxPages,"\xa0-\xa0",((e.currentPage+1)/e.maxPages*100).toFixed(0),"%"]})]})}var f=n(195);n(403),n(404);function m(e,t,n,r,i){var o=Math.abs(e-t),s=270*t,l=Math.abs(r-s)<2*window.innerHeight||o<3,a=["pagePreview"];return e===t&&a.push("selected"),l||a.push("placeholder"),Object(u.jsx)("img",{width:"100%","data-index":t,src:l?n:void 0,className:a.join(" "),onClick:function(e){return i&&i(t)}},t)}function x(e,t,n,r){var i,o=[],s=0,l=Object(f.a)(t);try{for(l.s();!(i=l.n()).done;){var a=i.value;o.push(m(e,s++,a,n,r))}}catch(c){l.e(c)}finally{l.f()}return o}for(var S=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).realElement=void 0,e.selectedIndex=-1,e.state={currentScrollTop:0,panelVisible:!0,height:0},e}return Object(c.a)(n,[{key:"getScrollTop",value:function(){var e;return(null===(e=this.realElement)||void 0===e?void 0:e.scrollTop)||0}},{key:"getElementHeight",value:function(){var e;return(null===(e=this.realElement)||void 0===e?void 0:e.clientHeight)||0}},{key:"scrollHandler",value:function(e){var t=this.getScrollTop();Math.abs(t-this.state.currentScrollTop)>window.innerHeight&&this.setState({currentScrollTop:t,height:this.getElementHeight()})}},{key:"scrollToSelected",value:function(){if(this.realElement){var e=this.realElement.querySelector('[data-index="'.concat(this.props.selectedIndex,'"]'));null===e||void 0===e||e.scrollIntoView({behavior:"smooth"})}}},{key:"intervalListener",value:function(){this.selectedIndex!=this.props.selectedIndex&&(this.scrollToSelected(),this.selectedIndex=this.props.selectedIndex),this.getElementHeight()!=this.state.height&&(this.setState({height:this.getElementHeight()}),this.scrollToSelected())}},{key:"componentDidMount",value:function(){window.setInterval(this.intervalListener.bind(this),75),this.realElement=document.querySelector(".pagePreviewSection");var e=this.getScrollTop();e!=this.state.currentScrollTop&&this.setState({currentScrollTop:e})}},{key:"previewClicked",value:function(e){this.props.onSetPage&&this.props.onSetPage(e)}},{key:"togglePanel",value:function(e){var t=this.state.panelVisible;this.setState({panelVisible:!t})}},{key:"render",value:function(){var e=this,t=this.props;if(window.innerWidth<600||!t.urlArray)return Object(u.jsx)("div",{className:"pagePreviewContainer hidden",children:Object(u.jsx)("div",{className:"pagePreviewSection"})});var n=["pagePreviewContainer"];return this.state.panelVisible||n.push("panelHidden"),Object(u.jsxs)("div",{className:n.join(" "),children:[Object(u.jsx)("div",{className:"pagePreviewHideArrow",onClick:function(t){return e.togglePanel(t)},children:Object(u.jsx)("div",{className:"pagePreviewHideArrowIcon"})}),Object(u.jsx)("div",{className:"pagePreviewSection",onScroll:function(t){return e.scrollHandler(t)},children:x(t.selectedIndex,t.urlArray,this.state.currentScrollTop,this.previewClicked.bind(this))})]})}}]),n}(i.a.Component),b=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={pages:e.props.pages,previewPages:e.props.previewPages,currentPageIndex:e.props.startIndex||0,onClose:e.props.onClose,onReadPage:e.props.onReadPage},e.keyHandlers={ArrowLeft:e.prevPage,ArrowUp:e.prevPage,ArrowRight:e.nextPage,ArrowDown:e.nextPage},e}return Object(c.a)(n,[{key:"setPageIndex",value:function(e){this.state.onReadPage&&this.state.onReadPage(e),this.setState({currentPageIndex:e})}},{key:"nextPage",value:function(){this.state.currentPageIndex<this.state.pages.length-1&&this.setPageIndex(this.state.currentPageIndex+1)}},{key:"prevPage",value:function(){this.state.currentPageIndex>0&&this.setPageIndex(this.state.currentPageIndex-1)}},{key:"handleKeyDown",value:function(e){var t=this.keyHandlers[e.code];t&&t.bind(this)()}},{key:"render",value:function(){var e=this,t=this.state,n=t.pages,r=t.currentPageIndex,i=this.state.previewPages||n;if(i.length!=n.length)throw new Error("pages and previewPages must have the same length!");return Object(u.jsxs)("div",{tabIndex:0,className:"comicReader",onKeyDown:function(t){return e.handleKeyDown(t)},children:[Object(u.jsx)(v,{onReturnClicked:this.state.onClose,currentPage:r,maxPages:n.length}),Object(u.jsxs)("div",{className:"mainContent",children:[Object(u.jsx)(S,{selectedIndex:r,urlArray:i,onSetPage:function(t){return e.setPageIndex(t)}}),Object(u.jsx)("div",{className:"contentCenter",children:Object(u.jsx)(p,{pages:n,currentIndex:r,onSetPage:function(t){return e.setPageIndex(t)}})})]})]})}}]),n}(i.a.Component),j=[],P=[],I=1;I<=25;I++)j.push("./fa4f8149-409f-4b92-805b-d99fe92f4f6d/Death Note Vol. 01 (2005) (Digital TPB) (DarkZone-Empire) ".concat(I.toString().padStart(3,"0"),".jpg.480w")),P.push("./fa4f8149-409f-4b92-805b-d99fe92f4f6d/Death Note Vol. 01 (2005) (Digital TPB) (DarkZone-Empire) ".concat(I.toString().padStart(3,"0"),".jpg.thumb"));s.a.render(Object(u.jsx)(i.a.StrictMode,{children:Object(u.jsx)(b,{pages:j})}),document.getElementById("root")),l()}},[[405,1,2]]]);
//# sourceMappingURL=main.e612be7d.chunk.js.map